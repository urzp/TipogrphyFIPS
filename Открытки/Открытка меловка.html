<style>
	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		height: 40px;
		border-radius: 5px;
	}

	.t-form__screen .t-form__errorbox-wrapper {
		clear: both;
	}

	.t-form__inputsbox.t-form__screen {
		background-color: #fff;
		padding: 20px;
	}

	.t-form__screen .t-upwidget-container__button {
		background-color: #44647d !important;
	}

	.t-form__screen .t-input-group_fr {
		text-align: right;
	}

	.t-form__screen .t-form__submit {
		margin: 30px 0 0;
	}

	.t-form__screen .t-input-group {
		display: flex;
		flex-wrap: wrap;
		align-content: flex-start;
		margin: 0;
		width: 20%;
		min-width: 200px;
	}

	.t-form__screen .t-input-title {
		width: 100%;
		height: auto;
	}

	.t-form__screen-wrapper.t-form__screen-wrapper_active {
		display: flex !important;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.t-form__screen .t-input-group.t-input-group_fr {
		text-align: right;
		justify-content: flex-end;
		width: 100%;
		margin-bottom: 0;
	}

	.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
		width: 50%;
		align-content: flex-end;
	}

	.t-form__screen .t-input-group.t-input-group_tx {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		width: 90%;
	}

	.t-form__screen .t-form__screen-wrapper_active .t-input-group_cb, 
	.t-form__screen .t-form__screen-wrapper_active .t-input-group_uw {
    width: 10%;
    min-width: 290px;
    margin-bottom: 0;
}

	.t-form__screen .t-input-group_ph,
	.t-form__screen .t-input-group_sb,
	.t-form__screen .t-input-group_in,
	.t-form__screen .t-input-group_em,
	.t-form__screen .t-input-group_nm,
	.t-form__screen .t-input-group_uw {
		width: 50%;
		margin-right: 0;
	}

	.t-form__screen .t-input-group_in[data-input-lid="1584868297796"] {
		width: 20%;
	}

	.t-form__screen .sepcial-flex-wrapper {
		width: 50%;
		display: flex;
		flex-wrap: nowrap;
		align-items: center;
	}

	.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
		position: relative;
		top: 10px;
		left: -80px;
	}

	.t-form__screen .t-input-group.t-input-group_cb .t-text_xs {
		font-size: 15px;
	}

	.t-form__screen .t-form__submit .t-form__screen-btn-next {
    	padding: 0 30px 0 10px;
	}
	.t-form__screen .t-form__submit .t-form__screen-btn-prev {
		padding: 0 10px 0 30px;
	}
	.t-form__screen .t-form__submit .t-submit{
		padding: 0 10px;
	}
	.t-form__screen .t-input-group{
		margin-bottom: 25px;	
	}
	.t-form__screen .t-select__wrapper:after{
		right: 70px;
	}

	@media screen and (max-width: 700px) {
		.t-form__screen .t-input-group.t-input-group_fr {
			text-align: center;
			justify-content: center;
		}

		.t-form__screen .t-input-group_ph,
		.t-form__screen .t-input-group_sb,
		.t-form__screen .t-input-group_in,
		.t-form__screen .t-input-group_em,
		.t-form__screen .t-input-group_nm,
		.t-form__screen .t-input-group_uw {
			width: 100%;
			justify-content: center;
		}

		.t-form__screen-wrapper.t-form__screen-wrapper_active {
			justify-content: center;
		}

		.t-form__screen .t-input-group_uw {
			text-align: center;
		}

		.t-form__screen .t-input-group_uw .t-input-block {
			display: flex;
			justify-content: center;
		}

		.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
			width: 100%;
		}

		.t-form__screen .t-form__screen-btn-prev {
			margin-right: 0;
		}

		.t-form__screen .sepcial-flex-wrapper {
			justify-content: center;
			width: 100%;
			flex-wrap: wrap;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-block {
			width: auto;
			display: flex;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
			position: inherit;
			justify-content: center;
			margin: 10px 0 15px;
		}
	}
	@media screen and (max-width: 460px){
		.t-form__screen .t-form__submit > .t-form__screen-btn-prev {
			margin-bottom: 15px;
			padding: 10px;
		}
		.t-form__screen .t-select__wrapper:after {
			right: 40px;
		}
	}
</style>
<script>
	$(document).ready(function () {

		try {
			setTimeout(function () {
				$('.t-form__screen-current-view').remove();
				$('.t-form__screen-wrapper .t-input-group_uw, .t-form__screen-wrapper .t-input-group_uw + .t-input-group_cb').wrapAll('<div class="sepcial-flex-wrapper"></div>');

				function updateFinalPrice() {
					if (column == 0) {
						rangeVal = 50;
					}

					if (color && (row == 1 || row == 4)){
						row = row + 1;
					}
					if (!color && (row == 2 || row == 5)){
						row = row - 1;
					}
					let final_price = Math.floor(table[row][column] * Math.ceil(rangeVal / 50) * 50 * numberOfSets);

					$('[data-input-lid="1584868418389"] .t-calc').html(`<s>${Math.floor(final_price)} руб</s> <span style="color:white;">с НДС</span><br/>${Math.floor(final_price * 0.93)}`);
					$('[data-input-lid="1584868661139"] .t-calc').text(Math.floor(final_price * 0.93));
					$('[data-input-lid="1584868418389"] [name="Formula"]').attr('value', Math.floor(final_price));
	                $('[data-input-lid="1584868661139"] [name="Formula_2"]').attr('value', Math.floor(final_price * 0.93));
				}

				//определение переменных

				const table_mel = [ // Открытка МЕЛОВКА
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000], // Цветность\Количество
					[14.64, 11.26, 10.87, 10.49, 10.12, 9.76, 9.42, 9.09, 8.77, 8.47, 8.38, 8.3, 8.22, 8.13, 8.05, 7.97, 7.89, 7.81, 7.74, 7.66], // Евро, 4+0 (210*100)
					[23.19, 17.84, 17.22, 16.61, 16.03, 15.47, 14.93, 14.41, 13.9, 13.42, 13.28, 13.15, 13.02, 12.89, 12.76, 12.63, 12.5, 12.38, 12.26, 12.13], // Евро, 4+4 (210*200)
					[36.18, 27.83, 26.86, 25.92, 25.01, 24.13, 23.29, 22.47, 21.69, 20.93, 20.72, 20.51, 20.31, 20.1, 19.9, 19.7, 19.51, 19.31, 19.12, 18.93], // Евро со сгибом, 4+4 210*200 в ра
					[20.28, 15.6, 15.05, 14.53, 14.02, 13.53, 13.05, 12.6, 12.16, 11.73, 11.61, 11.5, 11.38, 11.27, 11.16, 11.04, 10.93, 10.82, 10.72, 10.61], // А5, 4+0 (148*210)
					[32.4, 24.92, 24.05, 23.21, 22.39, 21.61, 20.85, 20.12, 19.42, 18.74, 18.55, 18.37, 18.18, 18, 17.82, 17.64, 17.47, 17.29, 17.12, 16.95], // А5, 4+4 (148*210)
					[36.35, 27.96, 26.98, 26.04, 25.13, 24.25, 23.4, 22.58, 21.79, 21.03, 20.82, 20.61, 20.4, 20.2, 20, 19.8, 19.6, 19.4, 19.21, 19.02] // А5 со сгибом, 4+4 210*297 в разв
				];
				const table_design = [ // Открытка ДИЗАЙНЕРКА
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000], // Цветность\Количество
					[28.44, 21.88, 21.11, 20.38, 19.66, 18.97, 18.31, 17.67, 17.05, 16.45, 16.29, 16.13, 15.97, 15.81, 15.65, 15.49, 15.34, 15.18, 15.03, 14.88], // Евро, 4+0 (210*100)
					[37.18, 28.6, 27.6, 26.63, 25.7, 24.8, 23.93, 23.1, 22.29, 21.51, 21.29, 21.08, 20.87, 20.66, 20.45, 20.25, 20.05, 19.85, 19.65, 19.45], // Евро, 4+4 (210*200)
					[70.72, 54.4, 52.5, 50.66, 48.89, 47.17, 45.52, 43.93, 42.39, 40.91, 40.5, 40.09, 39.69, 39.3, 38.9, 38.51, 38.13, 37.75, 37.37, 37], // Евро со сгибом, 4+4 210*200 в ра
					[37.51, 28.85, 27.84, 26.87, 25.93, 25.02, 24.14, 23.3, 22.48, 21.7, 21.48, 21.26, 21.05, 20.84, 20.63, 20.43, 20.22, 20.02, 19.82, 19.62], // А5, 4+0 (148*210)
					[48.67, 37.44, 36.13, 34.87, 33.64, 32.47, 31.33, 30.23, 29.18, 28.15, 27.87, 27.59, 27.32, 27.05, 26.78, 26.51, 26.24, 25.98, 25.72, 25.46], // А5, 4+4 (148*210)
					[70.72, 54.4, 52.5, 50.66, 48.89, 47.17, 45.52, 43.93, 42.39, 40.91, 40.5, 40.09, 39.69, 39.3, 38.9, 38.51, 38.13, 37.75, 37.37, 37] // А5 со сгибом, 4+4 210*297 в разв
				];
				let table = table_mel;
				let row = 1;
				let column = 0;
				let numberOfSets = 1;
				let rangeVal = 100;
				let color = false;

				// eventListeners
				$("#rec188030151").off('change');
				$('.t-select, .t-radio, .t-checkbox, .t-img-select').off('change');
				$(".t-form__screen-wrapper .t-input.js-tilda-rule").off();

				$('[data-input-lid="1590052674754"] .t-radio__wrapper').change(function () { // бумага
				
					if ($('[data-input-lid="1590052674754"] .t-radio:eq(0)').prop('checked')) {
						table = table_mel;
						updateFinalPrice();
					} else if ($('[data-input-lid="1590052674754"] .t-radio:eq(1)').prop(
						'checked')) {
						table = table_design;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868125487"] .t-radio__wrapper').change(function () { // формат
					
					if ($('[data-input-lid="1584868125487"] .t-radio:eq(0)').prop('checked')) {
						row = 1;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(1)').prop(
						'checked')) {
							row = 3;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(2)').prop(
						'checked')) {
							row = 4;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(3)').prop(
						'checked')) {
							row = 6;
						updateFinalPrice();
					}
					
				});

				$('[data-input-lid="1584868178894"] .t-radio__wrapper').change(function () { // цветность
					
					if ($('[data-input-lid="1584868178894"] .t-radio:eq(0)').prop('checked')) {
						color = false;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868178894"] .t-radio:eq(1)').prop(
						'checked')) {
						color = true;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').keyup(function () { // тираж
					rangeVal = $('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val();
					for (let index = 0; index < table[0].length; index++) {
						if (rangeVal < 0 || !parseInt(rangeVal)) {
							$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val('');
							break;
						} else if (rangeVal <= table[0][index]) {
							column = index;
							break;
						} else if (rangeVal > table[0][table[0].length - 1]) {
							column = table[0].length - 1;
							break;
						}
					}
					updateFinalPrice();
				});

				$('[data-input-lid="1585845219300"] .t-radio__wrapper').change(function () { // кол-во комплектов
					$('[data-input-lid="1585845219300"] .t-radio').each(function (index, element) {
						if ($(element).prop('checked')) {
							numberOfSets = +index + 1;
							updateFinalPrice();
						}
					});
				});

				setInterval(updateFinalPrice, 100);
			}, 600);
		} catch (err) {}
	});
</script>