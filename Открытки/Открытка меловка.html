<style>
	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		height: 40px;
		border-radius: 5px;
	}

	.t-form__screen .t-form__errorbox-wrapper {
		clear: both;
	}

	.t-form__inputsbox.t-form__screen {
		background-color: #fff;
		padding: 20px;
	}

	.t-form__screen .t-upwidget-container__button {
		background-color: #44647d !important;
	}

	.t-form__screen .t-input-group_fr {
		text-align: right;
	}

	.t-form__screen .t-form__submit {
		margin: 30px 0 0;
	}

	.t-form__screen .t-input-group {
		display: flex;
		flex-wrap: wrap;
		align-content: flex-start;
		margin: 0;
		width: 20%;
		min-width: 200px;
	}

	.t-form__screen .t-input-title {
		width: 100%;
		height: auto;
	}

	.t-form__screen-wrapper.t-form__screen-wrapper_active {
		display: flex !important;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.t-form__screen .t-input-group.t-input-group_fr {
		text-align: right;
		justify-content: flex-end;
		width: 100%;
		margin-bottom: 0;
	}

	.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
		width: 50%;
		align-content: flex-end;
	}

	.t-form__screen .t-input-group.t-input-group_tx {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		width: 90%;
	}

	.t-form__screen .t-form__screen-wrapper_active .t-input-group_cb, 
	.t-form__screen .t-form__screen-wrapper_active .t-input-group_uw {
    width: 10%;
    min-width: 290px;
    margin-bottom: 0;
}

	.t-form__screen .t-input-group_ph,
	.t-form__screen .t-input-group_sb,
	.t-form__screen .t-input-group_in,
	.t-form__screen .t-input-group_em,
	.t-form__screen .t-input-group_nm,
	.t-form__screen .t-input-group_uw {
		width: 50%;
		margin-right: 0;
	}

	.t-form__screen .t-input-group_in[data-input-lid="1584868297796"] {
		width: 20%;
	}

	.t-form__screen .sepcial-flex-wrapper {
		width: 50%;
		display: flex;
		flex-wrap: nowrap;
		align-items: center;
	}

	.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
		position: relative;
		top: 10px;
		left: -80px;
	}

	.t-form__screen .t-input-group.t-input-group_cb .t-text_xs {
		font-size: 15px;
	}

	.t-form__screen .t-form__submit .t-form__screen-btn-next {
    	padding: 0 30px 0 10px;
	}
	.t-form__screen .t-form__submit .t-form__screen-btn-prev {
		padding: 0 10px 0 30px;
	}
	.t-form__screen .t-form__submit .t-submit{
		padding: 0 10px;
	}
	.t-form__screen .t-input-group{
		margin-bottom: 25px;	
	}
	.t-form__screen .t-select__wrapper:after{
		right: 70px;
	}

	@media screen and (max-width: 700px) {
		.t-form__screen .t-input-group.t-input-group_fr {
			text-align: center;
			justify-content: center;
		}

		.t-form__screen .t-input-group_ph,
		.t-form__screen .t-input-group_sb,
		.t-form__screen .t-input-group_in,
		.t-form__screen .t-input-group_em,
		.t-form__screen .t-input-group_nm,
		.t-form__screen .t-input-group_uw {
			width: 100%;
			justify-content: center;
		}

		.t-form__screen-wrapper.t-form__screen-wrapper_active {
			justify-content: center;
		}

		.t-form__screen .t-input-group_uw {
			text-align: center;
		}

		.t-form__screen .t-input-group_uw .t-input-block {
			display: flex;
			justify-content: center;
		}

		.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
			width: 100%;
		}

		.t-form__screen .t-form__screen-btn-prev {
			margin-right: 0;
		}

		.t-form__screen .sepcial-flex-wrapper {
			justify-content: center;
			width: 100%;
			flex-wrap: wrap;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-block {
			width: auto;
			display: flex;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
			position: inherit;
			justify-content: center;
			margin: 10px 0 15px;
		}
	}
	@media screen and (max-width: 460px){
		.t-form__screen .t-form__submit > .t-form__screen-btn-prev {
			margin-bottom: 15px;
			padding: 10px;
		}
		.t-form__screen .t-select__wrapper:after {
			right: 40px;
		}
	}
</style>
<script>
	$(document).ready(function () {

		try {
			setTimeout(function () {
				$('.t-form__screen-current-view').remove();
				$('.t-form__screen-wrapper .t-input-group_uw, .t-form__screen-wrapper .t-input-group_uw + .t-input-group_cb').wrapAll('<div class="sepcial-flex-wrapper"></div>');

				function updateFinalPrice() {
					if (column == 0) {
						rangeVal = 50;
					}

					if (color && (row == 1 || row == 4)){
						row = row + 1;
					}
					if (!color && (row == 2 || row == 5)){
						row = row - 1;
					}
					let final_price = Math.floor(table[row][column] * Math.ceil(rangeVal / 50) * 50 * numberOfSets);

					$('[data-input-lid="1584868418389"] .t-calc').html(`<s>${Math.floor(final_price)} руб</s> <span style="color:white;">с НДС</span><br/>${Math.floor(final_price * 0.93)}`);
					$('[data-input-lid="1584868661139"] .t-calc').text(Math.floor(final_price * 0.93));
					$('[data-input-lid="1584868418389"] [name="Formula"]').attr('value', Math.floor(final_price));
	                $('[data-input-lid="1584868661139"] [name="Formula_2"]').attr('value', Math.floor(final_price * 0.93));
				}

				//определение переменных
                //новые цены 2023
				const table_mel = [ // Открытка МЕЛОВКА
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000], // Цветность\Количество
					[16.11, 12.39, 11.96, 11.54, 11.13, 10.74, 10.37, 10.01, 9.66, 9.32, 9.22, 9.13, 9.04, 8.95, 8.86, 8.77, 8.68, 8.6, 8.51, 8.43], // Евро, 4+0 (210*100)
					[25.52, 19.63, 18.94, 18.28, 17.64, 17.02, 16.43, 15.85, 15.3, 14.76, 14.61, 14.47, 14.32, 14.18, 14.04, 13.9, 13.76, 13.62, 13.49, 13.35], // Евро, 4+4 (210*200)
					[39.79, 30.61, 29.54, 28.5, 27.51, 26.54, 25.62, 24.72, 23.85, 23.02, 22.79, 22.56, 22.34, 22.11, 21.89, 21.67, 21.45, 21.24, 21.03, 20.82], // Евро со сгибом, 4+4 210*200 в ра
					[22.31, 17.16, 16.56, 15.98, 15.42, 14.88, 14.36, 13.86, 13.37, 12.9, 12.78, 12.65, 12.52, 12.4, 12.27, 12.15, 12.03, 11.91, 11.79, 11.67], // А5, 4+0 (148*210)
					[35.63, 27.41, 26.45, 25.52, 24.63, 23.77, 22.94, 22.13, 21.36, 20.61, 20.41, 20.2, 20, 19.8, 19.6, 19.41, 19.21, 19.02, 18.83, 18.64], // А5, 4+4 (148*210)
					[39.98, 30.75, 29.67, 28.64, 27.63, 26.67, 25.73, 24.83, 23.96, 23.12, 22.89, 22.66, 22.44, 22.21, 21.99, 21.77, 21.55, 21.34, 21.12, 20.91] // А5 со сгибом, 4+4 210*297 в разв
				];
				const table_design = [ // Открытка ДИЗАЙНЕРКА
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000], // Цветность\Количество
					[32.72, 25.17, 24.29, 23.44, 22.62, 21.83, 21.06, 20.33, 19.61, 18.93, 18.74, 18.55, 18.37, 18.18, 18, 17.82, 17.64, 17.47, 17.29, 17.12], // Евро, 4+0 (210*100)
					[42.77, 32.9, 31.75, 30.64, 29.56, 28.53, 27.53, 26.57, 25.64, 24.74, 24.49, 24.25, 24.01, 23.77, 23.53, 23.29, 23.06, 22.83, 22.6, 22.38], // Евро, 4+4 (210*200)
					[81.33, 62.56, 60.37, 58.26, 56.22, 54.25, 52.35, 50.52, 48.75, 47.05, 46.57, 46.11, 45.65, 45.19, 44.74, 44.29, 43.85, 43.41, 42.98, 42.55], // Евро со сгибом, 4+4 210*200 в ра
					[43.13, 33.18, 32.02, 30.9, 29.82, 28.77, 27.77, 26.79, 25.86, 24.95, 24.7, 24.45, 24.21, 23.97, 23.73, 23.49, 23.26, 23.02, 22.79, 22.57], // А5, 4+0 (148*210)
					[55.97, 43.05, 41.54, 40.09, 38.69, 37.33, 36.03, 34.76, 33.55, 32.37, 32.05, 31.73, 31.41, 31.1, 30.79, 30.48, 30.17, 29.87, 29.57, 29.28], // А5, 4+4 (148*210)
					[81.47, 62.67, 60.48, 58.36, 56.32, 54.35, 52.44, 50.61, 48.84, 47.13, 46.66, 46.19, 45.73, 45.27, 44.82, 44.37, 43.93, 43.49, 43.05, 42.62] // А5 со сгибом, 4+4 210*297 в разв
				];
				let table = table_mel;
				let row = 1;
				let column = 0;
				let numberOfSets = 1;
				let rangeVal = 100;
				let color = false;

				// eventListeners
				$("#rec188030151").off('change');
				$('.t-select, .t-radio, .t-checkbox, .t-img-select').off('change');
				$(".t-form__screen-wrapper .t-input.js-tilda-rule").off();

				$('[data-input-lid="1590052674754"] .t-radio__wrapper').change(function () { // бумага
				
					if ($('[data-input-lid="1590052674754"] .t-radio:eq(0)').prop('checked')) {
						table = table_mel;
						updateFinalPrice();
					} else if ($('[data-input-lid="1590052674754"] .t-radio:eq(1)').prop(
						'checked')) {
						table = table_design;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868125487"] .t-radio__wrapper').change(function () { // формат
					
					if ($('[data-input-lid="1584868125487"] .t-radio:eq(0)').prop('checked')) {
						row = 1;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(1)').prop(
						'checked')) {
							row = 3;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(2)').prop(
						'checked')) {
							row = 4;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(3)').prop(
						'checked')) {
							row = 6;
						updateFinalPrice();
					}
					
				});

				$('[data-input-lid="1584868178894"] .t-radio__wrapper').change(function () { // цветность
					
					if ($('[data-input-lid="1584868178894"] .t-radio:eq(0)').prop('checked')) {
						color = false;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868178894"] .t-radio:eq(1)').prop(
						'checked')) {
						color = true;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').keyup(function () { // тираж
					rangeVal = $('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val();
					for (let index = 0; index < table[0].length; index++) {
						if (rangeVal < 0 || !parseInt(rangeVal)) {
							$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val('');
							break;
						} else if (rangeVal <= table[0][index]) {
							column = index;
							break;
						} else if (rangeVal > table[0][table[0].length - 1]) {
							column = table[0].length - 1;
							break;
						}
					}
					updateFinalPrice();
				});

				$('[data-input-lid="1585845219300"] .t-radio__wrapper').change(function () { // кол-во комплектов
					$('[data-input-lid="1585845219300"] .t-radio').each(function (index, element) {
						if ($(element).prop('checked')) {
							numberOfSets = +index + 1;
							updateFinalPrice();
						}
					});
				});

				setInterval(updateFinalPrice, 100);
			}, 600);
		} catch (err) {}
	});
</script>