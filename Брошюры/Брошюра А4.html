<style>
	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		height: 40px;
		border-radius: 5px;
	}

	.t-form__screen .t-form__errorbox-wrapper {
		clear: both;
	}

	.t-form__inputsbox.t-form__screen {
		background-color: #fff;
		padding: 20px;
	}

	.t-form__screen .t-upwidget-container__button {
		background-color: #44647d !important;
	}

	.t-form__screen .t-input-group_fr {
		text-align: right;
	}

	.t-form__screen .t-form__submit {
		margin: 30px 0 0;
	}

	.t-form__screen .t-input-group {
		display: flex;
		flex-wrap: wrap;
		align-content: flex-start;
		margin: 0;
		width: 20%;
		min-width: 200px;
	}

	.t-form__screen .t-input-title {
		width: 100%;
		height: auto;
	}

	.t-form__screen-wrapper.t-form__screen-wrapper_active {
		display: flex !important;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.t-form__screen .t-input-group.t-input-group_fr {
		text-align: right;
		justify-content: flex-end;
		width: 100%;
		margin-bottom: 0;
	}

	.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
		width: 50%;
		align-content: flex-end;
	}

	.t-form__screen .t-input-group.t-input-group_tx {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		width: 90%;
	}

	.t-form__screen .t-form__screen-wrapper_active .t-input-group_cb, 
	.t-form__screen .t-form__screen-wrapper_active .t-input-group_uw {
    width: 10%;
    min-width: 290px;
    margin-bottom: 0;
}

	.t-form__screen .t-input-group_ph,
	.t-form__screen .t-input-group_sb,
	.t-form__screen .t-input-group_in,
	.t-form__screen .t-input-group_em,
	.t-form__screen .t-input-group_nm,
	.t-form__screen .t-input-group_uw {
		width: 50%;
		margin-right: 0;
	}

	.t-form__screen .t-input-group_in[data-input-lid="1584868297796"] {
		width: 20%;
	}

	.t-form__screen .sepcial-flex-wrapper {
		width: 50%;
		display: flex;
		flex-wrap: nowrap;
		align-items: center;
	}

	.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
		position: relative;
		top: 10px;
		left: -80px;
	}

	.t-form__screen .t-input-group.t-input-group_cb .t-text_xs {
		font-size: 15px;
	}

	.t-form__screen .t-form__submit .t-form__screen-btn-next {
    	padding: 0 30px 0 10px;
	}
	.t-form__screen .t-form__submit .t-form__screen-btn-prev {
		padding: 0 10px 0 30px;
	}
	.t-form__screen .t-form__submit .t-submit{
		padding: 0 10px;
	}
	.t-form__screen .t-input-group{
		margin-bottom: 25px;	
	}
	.t-form__screen .t-select__wrapper:after{
		right: 70px;
	}

	@media screen and (max-width: 700px) {
		.t-form__screen .t-input-group.t-input-group_fr {
			text-align: center;
			justify-content: center;
		}

		.t-form__screen .t-input-group_ph,
		.t-form__screen .t-input-group_sb,
		.t-form__screen .t-input-group_in,
		.t-form__screen .t-input-group_em,
		.t-form__screen .t-input-group_nm,
		.t-form__screen .t-input-group_uw {
			width: 100%;
			justify-content: center;
		}

		.t-form__screen-wrapper.t-form__screen-wrapper_active {
			justify-content: center;
		}

		.t-form__screen .t-input-group_uw {
			text-align: center;
		}

		.t-form__screen .t-input-group_uw .t-input-block {
			display: flex;
			justify-content: center;
		}

		.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
			width: 100%;
		}

		.t-form__screen .t-form__screen-btn-prev {
			margin-right: 0;
		}

		.t-form__screen .sepcial-flex-wrapper {
			justify-content: center;
			width: 100%;
			flex-wrap: wrap;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-block {
			width: auto;
			display: flex;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
			position: inherit;
			justify-content: center;
			margin: 10px 0 15px;
		}
	}
	@media screen and (max-width: 460px){
		.t-form__screen .t-form__submit > .t-form__screen-btn-prev {
			margin-bottom: 15px;
			padding: 10px;
		}
		.t-form__screen .t-select__wrapper:after {
			right: 40px;
		}
	}
</style>
<script>
	$(document).ready(function () {

		try {
			setTimeout(function () {
				//определение переменных
				const table_a5 = [
                [ // Брошюра А5_меловка 
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[62.49, 49.68, 47.2, 44.84, 43.04, 41.75, 40.71, 39.89, 39.3, 38.9, 38.71], // 8 полос с обложкой
					[83.32, 68.81, 65.37, 62.1, 59.62, 57.83, 56.38, 55.26, 54.43, 53.88, 53.61], // 12 полос с обложкой
					[104.14, 96.32, 91.5, 86.93, 83.45, 80.95, 78.92, 77.35, 76.19, 75.42, 75.05], // 16 полос с обложкой
					[152.75, 144.6, 137.37, 130.5, 125.28, 121.52, 118.48, 116.12, 114.37, 113.23, 112.66], // 20 полос с обложкой
					[173.58, 163.78, 155.59, 147.81, 141.9, 137.64, 134.2, 131.52, 129.54, 128.25, 127.61], // 24 полос с обложкой
					[194.41, 180.89, 171.85, 163.25, 156.72, 152.02, 148.22, 145.26, 143.08, 141.65, 140.94], // 28 полос с обложкой
					[215.28, 197.96, 188.06, 178.66, 171.51, 166.37, 162.21, 158.96, 156.58, 155.01, 154.24], // 32 полос с обложкой
					[229.12, 215.05, 204.3, 194.08, 186.32, 180.73, 176.21, 172.69, 170.1, 168.4, 167.55] // 36 полос с обложкой
				],
				[ // Брошюра А5_колоркопи
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[70.32, 55.5, 52.73, 50.09, 48.09, 46.64, 45.48, 44.57, 43.9, 43.46, 43.24], // 8 полос с обложкой
					[93.02, 76.82, 72.98, 69.33, 66.56, 64.56, 62.95, 61.69, 60.76, 60.15, 59.85], // 12 полос с обложкой
					[117.18, 107.55, 102.17, 97.06, 93.18, 90.39, 88.13, 86.36, 85.07, 84.22, 83.8], // 16 полос с обложкой
					[170.55, 161.45, 153.38, 145.71, 139.88, 135.68, 132.29, 129.65, 127.7, 126.42, 125.79], // 20 полос с обложкой
					[193.81, 182.88, 173.74, 165.05, 158.45, 153.69, 149.85, 146.85, 144.65, 143.21, 142.49], // 24 полос с обложкой
					[217.1, 201.96, 191.86, 182.27, 174.98, 169.73, 165.49, 162.18, 159.74, 158.15, 157.36], // 28 полос с обложкой
					[240.32, 221.01, 209.96, 199.46, 191.48, 185.74, 181.1, 177.47, 174.81, 173.06, 172.2], // 32 полос с обложкой
					[255.84, 240.09, 228.09, 216.68, 208.01, 201.77, 196.73, 192.79, 189.9, 188, 187.06] // 36 полос с обложкой
				],
                [ // ламинация
                    [50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[18, 15, 14.48, 13.97, 13.48, 13.01, 12.55, 12.11, 11.69, 11.28, 11.17], // Глянцевая
					[20.4, 17, 16.41, 15.83, 15.28, 14.74, 14.23, 13.73, 13.25, 12.78, 12.66], // Матовая
					[27.6, 23, 22.2, 21.42, 20.67, 19.95, 19.25, 18.57, 17.92, 17.3, 17.12], // Soft touch
                ]];
                const table_a4 = [
                [ // Брошюра А4_меловка 
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[108.67, 86.36, 82.04, 77.94, 74.82, 72.58, 70.76, 69.35, 68.31, 67.62, 67.29], // 8 полос с обложкой
					[144.9, 119.72, 113.73, 108.05, 103.73, 100.61, 98.1, 96.14, 94.69, 93.75, 93.28], // 12 полос с обложкой
					[181.12, 167.53, 159.15, 151.2, 145.15, 140.79, 137.27, 134.53, 132.51, 131.19, 130.53], // 16 полос с обложкой
					[265.65, 251.47, 238.9, 226.95, 217.87, 211.34, 206.05, 201.93, 198.9, 196.91, 195.93], // 20 полос с обложкой
					[301.87, 284.85, 270.61, 257.08, 246.79, 239.39, 233.41, 228.74, 225.31, 223.05, 221.94], // 24 полос с обложкой
					[337.1, 314.59, 298.86, 283.92, 272.56, 264.38, 257.77, 252.62, 248.83, 246.34, 245.11], // 28 полос с обложкой
					[374.32, 344.28, 327.07, 310.71, 298.28, 289.34, 282.1, 276.46, 272.31, 269.59, 268.24], // 32 полос с обложкой
					[398.47, 373.98, 355.28, 337.52, 324.02, 314.3, 306.44, 300.31, 295.8, 292.85, 291.38], // 36 полос с обложкой
				],
                [ // Брошюра А4_колоркопи
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[122.4, 96.53, 91.7, 87.12, 83.63, 81.12, 79.1, 77.51, 76.35, 75.59, 75.21], // 8 полос с обложкой
					[162, 133.68, 127, 120.65, 115.82, 112.35, 109.54, 107.35, 105.74, 104.68, 104.16], // 12 полос с обложкой
					[202.8, 187.2, 177.84, 168.95, 162.19, 157.32, 153.39, 150.32, 148.07, 146.59, 145.85], // 16 полос с обложкой
					[176.64, 280.76, 266.72, 253.39, 243.25, 235.95, 230.05, 225.45, 222.07, 219.85, 218.75], // 20 полос с обложкой
					[337.2, 316.85, 301.01, 285.96, 274.52, 266.28, 259.63, 254.43, 250.62, 248.11, 246.87], // 24 полос с обложкой
					[378, 351.24, 333.68, 316.99, 304.31, 295.18, 287.81, 282.05, 277.82, 275.04, 273.67], // 28 полос с обложкой
					[417.6, 384.41, 365.19, 346.93, 333.05, 323.06, 314.98, 308.69, 304.05, 301.01, 299.51], // 32 полос с обложкой
					[445.2, 417.6, 396.72, 376.88, 361.81, 350.95, 342.18, 335.34, 330.31, 327, 325.37] // 36 полос с обложкой
				],
                [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[30.6, 25.5, 24.61, 23.75, 22.92, 22.11, 21.34, 20.59, 19.87, 19.18, 18.98], // Глянцевая
					[35.52, 29.6, 28.56, 27.56, 26.6, 25.67, 24.77, 23.9, 23.07, 22.26, 22.04], // Матовая
					[51.6, 43, 41.5, 40.04, 38.64, 37.29, 35.98, 34.72, 33.51, 32.34, 32.01], // Soft touch
				]];
				const coverLaminationCheckbox = $('[data-input-lid="1592427443629"] .t-checkboxes__wrapper [value="Ламинация обложки"]');
				const coverLaminationLabel = coverLaminationCheckbox.parent();
				const coverLaminationRadioWrapper = $('[data-input-lid="1592427484534"]');
				const coverLaminationRadio = coverLaminationRadioWrapper.find('.t-radio');
				let type = 0;
                let table = table_a4;
				let row = 1;
				let column = 0;
				let numberOfSets = 1;
				let coverLamination = false;
				let lamination_row = 1;
				let rangeVal = 50;

				// модификация элементов страницы
				$('.t-form__screen-current-view').remove();
				$('.t-form__screen-wrapper .t-input-group_uw, .t-form__screen-wrapper .t-input-group_uw + .t-input-group_cb').wrapAll('<div class="sepcial-flex-wrapper"></div>');
                $('[data-input-lid="1584868178894"], [data-input-lid="1584868297796"]').wrapAll('<div class="t-input-group">');
				coverLaminationRadioWrapper.detach();
				coverLaminationRadioWrapper.appendTo('[data-input-lid="1592427443629"]');
				coverLaminationRadioWrapper.css('padding-left', '30px');
				coverLaminationRadioWrapper.hide();

				// eventListeners
				$("#rec181417530").off('change');
				$('.t-select, .t-radio, .t-checkbox, .t-img-select').off('change');
				$(".t-form__screen-wrapper .t-input.js-tilda-rule").off();

				// основной скрипт калькулятора
				function updateFinalPrice() {

					if (column == 0) {
						rangeVal = 50;
					}
					let final_price = Math.floor(table[type][row][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);

					if (coverLamination) {
						final_price += Math.floor(table[2][lamination_row][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);
					}

					$('[data-input-lid="1584868418389"] .t-calc').html(`<s>${Math.floor(final_price)} руб</s> <span style="color:white;">с НДС</span><br/>${Math.floor(final_price * 0.93)}`);
					$('[data-input-lid="1584868661139"] .t-calc').text(Math.floor(final_price * 0.93));
					$('[data-input-lid="1584868418389"] [name="Formula"]').attr('value', Math.floor(final_price));
					$('[data-input-lid="1584868661139"] [name="Formula_2"]').attr('value', Math.floor(final_price * 0.93));
				}

                $('[data-input-lid="1638382723252"] .t-radio__wrapper').change(function (e) { // размер
                    console.log(e.target);
					if ($('[data-input-lid="1638382723252"] .t-radio:eq(0)').prop('checked')) {
						table = table_a4;
						updateFinalPrice();
					} else if ($('[data-input-lid="1638382723252"] .t-radio:eq(1)').prop(
						'checked')) {
						table = table_a5;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868178894"] .t-radio__wrapper').change(function () { // вид бумаги
					if ($('[data-input-lid="1584868178894"] .t-radio:eq(0)').prop('checked')) {
						type = 0;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868178894"] .t-radio:eq(1)').prop(
						'checked')) {
                            type = 1;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868125487"] .t-radio__wrapper').change(function () { // кол-во полос
					$('[data-input-lid="1584868125487"] .t-radio').each(function (index, element) {
						if ($(element).prop('checked')) {
							row = +index + 1;
							updateFinalPrice();
						}
					});
				});

				$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').keyup(function () { // тираж
					rangeVal = $('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val();
					for (let index = 0; index < table[type][0].length; index++) {
						if (rangeVal < 0 || !parseInt(rangeVal)) {
							$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val('');
							break;
						} else if (rangeVal <= table[type][0][index]) {
							column = index;
							break;
						} else if (rangeVal > table[type][0][table[type][0].length - 1]) {
							column = table[type][0].length - 1;
							break;
						}
					}
					updateFinalPrice();
				});

				$('[data-input-lid="1585845219300"] .t-radio__wrapper').change(function () { // кол-во комплектов
					$('[data-input-lid="1585845219300"] .t-radio').each(function (index, element) {
						if ($(element).prop('checked')) {
							numberOfSets = +index + 1;
							updateFinalPrice();
						}
					});
				});

				coverLaminationLabel.parent().change(function () { // допы
					if (coverLaminationCheckbox.prop('checked')) {
						coverLaminationRadioWrapper.show();
						coverLaminationRadio.first().prop('checked', true);
						coverLamination = true;
						lamination_row = 1;
						updateFinalPrice();
					} else {
						coverLaminationRadioWrapper.hide();
						coverLaminationRadio.each(function(index, element){
							$(element).prop('checked', false);
						});
						coverLamination = false;
						updateFinalPrice();
					}
				});

				coverLaminationRadioWrapper.find('.t-radio__wrapper').change(function(){
					coverLaminationRadio.each(function(index, element){
						if ($(element).prop('checked')) {
							lamination_row = index + 1;
						}
					});
					updateFinalPrice();
				});

				setInterval(updateFinalPrice, 100);
			}, 600);
		} catch (err) {}
	});
</script>