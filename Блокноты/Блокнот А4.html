<style>
	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in {
		width: 10%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper .t-input-group_rd + .t-input-group_in + .t-input-group_in .t-input-block {
		width: 50%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		height: 40px;
		border-radius: 5px;
	}

	.t-form__screen .t-form__errorbox-wrapper {
		clear: both;
	}

	.t-form__inputsbox.t-form__screen {
		background-color: #fff;
		padding: 20px;
	}

	.t-form__screen .t-upwidget-container__button {
		background-color: #44647d !important;
	}

	.t-form__screen .t-input-group_fr {
		text-align: right;
	}

	.t-form__screen .t-form__submit {
		margin: 30px 0 0;
	}

	.t-form__screen .t-input-group {
		display: flex;
		flex-wrap: wrap;
		align-content: flex-start;
		margin: 0;
		width: 20%;
		min-width: 200px;
	}

	.t-form__screen .t-input-title {
		width: 100%;
		height: auto;
	}

	.t-form__screen-wrapper.t-form__screen-wrapper_active {
		display: flex !important;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.t-form__screen .t-input-group.t-input-group_fr {
		text-align: right;
		justify-content: flex-end;
		width: 100%;
		margin-bottom: 0;
	}

	.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
		width: 50%;
		align-content: flex-end;
	}

	.t-form__screen .t-input-group.t-input-group_tx {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block {
		width: 100%;
	}

	.t-form__screen-wrapper_active .t-input-block .t-input,
	.t-form__screen-wrapper_active .t-input-block .t-select {
		width: 90%;
	}

	.t-form__screen .t-form__screen-wrapper_active .t-input-group_cb, 
	.t-form__screen .t-form__screen-wrapper_active .t-input-group_uw {
    width: 10%;
    min-width: 290px;
    margin-bottom: 0;
}

	.t-form__screen .t-input-group_ph,
	.t-form__screen .t-input-group_sb,
	.t-form__screen .t-input-group_in,
	.t-form__screen .t-input-group_em,
	.t-form__screen .t-input-group_nm,
	.t-form__screen .t-input-group_uw {
		width: 50%;
		margin-right: 0;
	}

	.t-form__screen .t-input-group_in[data-input-lid="1584868297796"] {
		width: 20%;
	}

	.t-form__screen .sepcial-flex-wrapper {
		width: 50%;
		display: flex;
		flex-wrap: nowrap;
		align-items: center;
	}

	.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
		position: relative;
		top: 10px;
		left: -80px;
	}

	.t-form__screen .t-input-group.t-input-group_cb .t-text_xs {
		font-size: 15px;
	}

	.t-form__screen .t-form__submit .t-form__screen-btn-next {
    	padding: 0 30px 0 10px;
	}
	.t-form__screen .t-form__submit .t-form__screen-btn-prev {
		padding: 0 10px 0 30px;
	}
	.t-form__screen .t-form__submit .t-submit{
		padding: 0 10px;
	}
	.t-form__screen .t-input-group{
		margin-bottom: 25px;	
	}
	.t-form__screen .t-select__wrapper:after{
		right: 70px;
	}

	@media screen and (max-width: 700px) {
		.t-form__screen .t-input-group.t-input-group_fr {
			text-align: center;
			justify-content: center;
		}

		.t-form__screen .t-input-group_ph,
		.t-form__screen .t-input-group_sb,
		.t-form__screen .t-input-group_in,
		.t-form__screen .t-input-group_em,
		.t-form__screen .t-input-group_nm,
		.t-form__screen .t-input-group_uw {
			width: 100%;
			justify-content: center;
		}

		.t-form__screen-wrapper.t-form__screen-wrapper_active {
			justify-content: center;
		}

		.t-form__screen .t-input-group_uw {
			text-align: center;
		}

		.t-form__screen .t-input-group_uw .t-input-block {
			display: flex;
			justify-content: center;
		}

		.t-form__screen .t-input-group.t-input-group_uw+.t-input-group.t-input-group_fr {
			width: 100%;
		}

		.t-form__screen .t-form__screen-btn-prev {
			margin-right: 0;
		}

		.t-form__screen .sepcial-flex-wrapper {
			justify-content: center;
			width: 100%;
			flex-wrap: wrap;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-block {
			width: auto;
			display: flex;
		}

		.t-form__screen .sepcial-flex-wrapper .t-input-group_cb {
			position: inherit;
			justify-content: center;
			margin: 10px 0 15px;
		}
	}
	@media screen and (max-width: 460px){
		.t-form__screen .t-form__submit > .t-form__screen-btn-prev {
			margin-bottom: 15px;
			padding: 10px;
		}
		.t-form__screen .t-select__wrapper:after {
			right: 40px;
		}
	}
</style>
<script>
	$(document).ready(function () {
        $('.t-checkboxes__wrapper [value="Скругление углов"]').parent().css("display", "none");// убираем пункт ламинация (решение директора) 
		try {
			setTimeout(function () {
				//определение переменных
				const table_A5 = [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[91.03, 85.57, 79.58, 74.01, 69.2, 65.05, 61.79, 59.63, 58.74, 58.15, 57.86], // Блок без печати (0+0)
					[172.43, 129.4, 120.34, 111.92, 104.64, 98.36, 93.45, 90.18, 88.82, 87.94, 87.5], // Блок с ч/б печатью (1+0)
					[268.06, 184.02, 171.14, 159.16, 148.81, 139.88, 132.89, 128.24, 126.32, 125.05, 124.43], // Блок с цветной печатью (4+0)
					[23, 21.85, 20.1, 18.49, 17.01, 15.65, 14.4, 13.25, 12.19, 11.21, 10.32], // Скругление углов
					[5, 4.75, 3, 3, 3, 3, 3, 3, 3, 3, 3] // Пружинка по длинной стороне
				];
				const table_A5_lamination = [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[11, 10.97, 10.2, 9.49, 8.82, 8.21, 7.63, 7.1, 6.6, 6.14, 5.71], // Ламинация обложки (1+1) гл
					[11, 10.97, 10.2, 9.49, 8.82, 8.21, 7.63, 7.1, 6.6, 6.14, 5.71], // ламинация обложки (1+1) мат
					[11.08, 11.06, 10.29, 9.57, 8.9, 8.27, 7.69, 7.16, 6.65, 6.19, 5.76], // Ламинация подложки (1+1) гл.
					[11.08, 11.06, 10.29, 9.57, 8.9, 8.27, 7.69, 7.16, 6.65, 6.19, 5.76], // Ламинация подложки (1+1) мат
				];
				const table_A6 = [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[69.86, 54.74, 50.91, 47.34, 44.27, 41.61, 39.53, 38.15, 37.57, 37.2, 37.01], // Блок без печати (0+0)
					[143.16, 101.3, 94.21, 87.61, 81.92, 77, 73.15, 70.59, 69.53, 68.84, 68.5], // Блок с ч/б печатью (1+0)
					[164.08, 118.37, 110.08, 102.38, 95.72, 89.98, 85.48, 82.49, 81.25, 80.44, 80.04], // Блок с цветной печатью (4+0)
					[23, 21.85, 20.1, 18.49, 17.01, 15.65, 14.4, 13.25, 12.19, 11.21, 10.32], // Скругление углов
					[4, 3.8, 3, 3, 3, 3, 3, 3, 3, 3, 3] // Пружинка по длинной стороне
				];
				const table_A6_lamination = [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[6.09, 5.78, 5.38, 5, 4.65, 4.32, 4.02, 3.74, 3.48, 3.23, 3.01], // Ламинация обложки (1+1) гл
					[6.09, 5.78, 5.38, 5, 4.65, 4.32, 4.02, 3.74, 3.48, 3.23, 3.01], // ламинация обложки (1+1) мат
					[6.09, 5.78, 5.38, 5, 4.65, 4.32, 4.02, 3.74, 3.48, 3.23, 3.01], // Ламинация подложки (1+1) гл.
					[6.09, 5.78, 5.38, 5, 4.65, 4.32, 4.02, 3.74, 3.48, 3.23, 3.01], // Ламинация подложки (1+1) мат
				];
				const table_A4 = [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[155.74, 125, 116.25, 108.11, 101.09, 95.02, 90.27, 87.11, 85.8, 84.94, 84.52], // Блок без печати (0+0)
					[240.81, 193, 179.49, 166.93, 156.08, 146.71, 139.38, 134.5, 132.48, 131.16, 130.5], // Блок с ч/б печатью (1+0)
					[342.54, 260, 241.8, 224.87, 210.26, 197.64, 187.76, 181.19, 178.47, 176.69, 175.8], // Блок с цветной печатью (4+0)
					[24, 22.8, 20.98, 19.3, 17.75, 16.33, 15.03, 13.82, 12.72, 11.7, 10.77], // Скругление углов
					[6, 5.7, 4, 4, 4, 4, 4, 4, 4, 4, 4], // Пружинка по длинной стороне
				];
				const table_A4_lamination = [
					[50, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550], // Цветность\Количество
					[18.9, 17.95, 16.69, 15.52, 14.52, 13.64, 12.89, 12.25, 11.7, 11.23, 10.84], // Ламинация обложки (1+1) гл
					[18.9, 17.95, 16.69, 15.52, 14.52, 13.64, 12.89, 12.25, 11.7, 11.23, 10.84], // ламинация обложки (1+1) мат
					[18.9, 17.95, 16.69, 15.52, 14.75, 13.72, 12.76, 11.86, 11.03, 10.26, 9.54], // Ламинация подложки (1+1) гл.
					[18.9, 17.95, 16.69, 15.52, 14.75, 13.72, 12.76, 11.86, 11.03, 10.26, 9.54], // Ламинация подложки (1+1) мат
				];
				const laminationCoverCheckbox = $('[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Ламинация обложки"]');
				const laminationCoverLabel = laminationCoverCheckbox.parent();
				const laminationCoverTypeWrapper = $('[data-input-lid="1592549311667"]');
				const laminationCoverTypeRadio = laminationCoverTypeWrapper.find('.t-radio');

				const laminationUndercoverCheckbox = $('[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Ламинация подложки"]');
				const laminationUndercoverLabel = laminationUndercoverCheckbox.parent();
				const laminationUndercoverTypeWrapper = $('[data-input-lid="1592549337458"]');
				const laminationUndercoverTypeRadio = laminationUndercoverTypeWrapper.find('.t-radio');

				const laminationCheckboxes = $('[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Ламинация обложки"], [data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Ламинация подложки"]');
				let table = table_A4;
				let table_lamination = table_A4_lamination;
				let row = 1;
				let column = 0;
				let numberOfSets = 1;
				let rangeVal = 50;
				let cover_lamination = false;
				let undercover_lamination = false;
				let roundedCorners = false;
				let spring = false;
				let cover_lamination_type = 0;
				let undercover_lamination_type = 0;

				// модификация элементов страницы
				$('.t-form__screen-current-view').remove();
				$('.t-form__screen-wrapper .t-input-group_uw, .t-form__screen-wrapper .t-input-group_uw + .t-input-group_cb').wrapAll('<div class="sepcial-flex-wrapper"></div>');
				laminationCoverTypeWrapper.css('padding-left', '30px');
				laminationCoverTypeWrapper.detach();
				laminationUndercoverTypeWrapper.css('padding-left', '30px');
				laminationUndercoverTypeWrapper.detach();

				// eventListeners
				$("#rec184626883").off('change');
				$('.t-select, .t-radio, .t-checkbox, .t-img-select').off('change');
				$(".t-form__screen-wrapper .t-input.js-tilda-rule").off();

				// основной скрипт калькулятора
				function updateFinalPrice() {
					
					if (column == 0) {
						rangeVal = 50;
					}

					let final_price = Math.floor(table[row][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);

					if (cover_lamination) {
						final_price += Math.floor(table_lamination[1 + cover_lamination_type][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);
					}

					if (undercover_lamination) {
						final_price += Math.floor(table_lamination[3 + undercover_lamination_type][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);
					}

					if (roundedCorners) {
						final_price += Math.floor(table[4][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);
					}

					if (spring) {
						final_price += Math.floor(table[5][column] * Math.ceil(rangeVal / 25) * 25 * numberOfSets);
					}

					$('[data-input-lid="1584868418389"] .t-calc').html(`<s>${Math.floor(final_price)} руб</s> <span style="color:white;">с НДС</span><br/>${Math.floor(final_price * 0.93)}`);
					$('[data-input-lid="1584868661139"] .t-calc').text(Math.floor(final_price * 0.93));
					$('[data-input-lid="1584868418389"] [name="Formula"]').attr('value', Math.floor(final_price));
	                $('[data-input-lid="1584868661139"] [name="Formula_2"]').attr('value', Math.floor(final_price * 0.93));
				}



				$('[data-input-lid="1584868125487"] .t-radio__wrapper').change(function () { // размер
					if ($('[data-input-lid="1584868125487"] .t-radio:eq(0)').prop('checked')) {
						table = table_A4;
						table_lamination = table_A4_lamination;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(1)').prop(
						'checked')) {
						table = table_A5;
						table_lamination = table_A5_lamination;
						updateFinalPrice();
					} else if ($('[data-input-lid="1584868125487"] .t-radio:eq(2)').prop(
						'checked')) {
						table = table_A6;
						table_lamination = table_A6_lamination;
						updateFinalPrice();
					}
				});

				$('[data-input-lid="1584868178894"] .t-radio__wrapper').change(function () { // цветность
					$('[data-input-lid="1584868178894"] .t-radio').each(function (index, element) {
						if ($(element).prop('checked')) {
							row = +index + 1;
							updateFinalPrice();
						}
					});
				});

				$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').keyup(function () { // тираж
					rangeVal = $('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val();
					for (let index = 0; index < table[0].length; index++) {
						if (rangeVal < 0 || !parseInt(rangeVal)) {
							$('[data-input-lid="1584868297796"] .t-input.js-tilda-rule').val('');
							break;
						} else if (rangeVal <= table[0][index]) {
							column = index;
							break;
						} else if (rangeVal > table[0][table[0].length - 1]) {
							column = table[0].length - 1;
							break;
						}
					}
					updateFinalPrice();
				});

				$('[data-input-lid="1585845219300"] .t-radio__wrapper').change(function () { // кол-во комплектов
					$('[data-input-lid="1585845219300"] .t-radio').each(function (index, element) {
						if ($(element).prop('checked')) {
							numberOfSets = +index + 1;
							updateFinalPrice();
						}
					});
				});

				$('[data-input-lid="1584971819844"] .t-checkboxes__wrapper').change(function () { // допы

					if ($(
							'[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Скругление углов"]')
						.prop('checked')) {
						roundedCorners = $(
							'[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Скругление углов"]'
							).prop('checked');
						updateFinalPrice();
					} else {
						roundedCorners = $(
							'[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Скругление углов"]'
							).prop('checked');
						updateFinalPrice();
					}

					if ($(
							'[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Пружинка по длинной стороне"]')
						.prop('checked')) {
						spring = $(
							'[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Пружинка по длинной стороне"]'
							).prop('checked');
						updateFinalPrice();
					} else {
						spring = $(
							'[data-input-lid="1584971819844"] .t-checkboxes__wrapper [value="Пружинка по длинной стороне"]'
							).prop('checked');
						updateFinalPrice();
					}
				});

				laminationCheckboxes.click(function(){
					if (laminationCoverCheckbox.prop('checked')) {
						laminationCoverLabel.after(laminationCoverTypeWrapper);
						if(!laminationCoverTypeRadio.is(':checked')){
							laminationCoverTypeRadio.first().prop('checked', true);
							cover_lamination_type = 0;
						}
						cover_lamination = true;
						updateFinalPrice();
					} else {
						laminationCoverTypeRadio.each(function(index, element){
							$(element).prop('checked', false);
						});
						laminationCoverTypeWrapper.detach();
						cover_lamination = false;
						updateFinalPrice();
					}

					if (laminationUndercoverCheckbox.prop('checked')) {
						laminationUndercoverLabel.after(laminationUndercoverTypeWrapper);
						if(!laminationUndercoverTypeRadio.is(':checked')){
							laminationUndercoverTypeRadio.first().prop('checked', true);
							undercover_lamination_type = 0;
						}
						undercover_lamination = true;
						updateFinalPrice();
					} else {
						laminationUndercoverTypeRadio.each(function(index, element){
							$(element).prop('checked', false);
						});
						laminationUndercoverTypeWrapper.detach();
						undercover_lamination = false;
						updateFinalPrice();
					}
				});

				laminationCoverTypeWrapper.find('.t-radio__wrapper').change(function(){
					laminationCoverTypeRadio.each(function(index, element){
						if ($(element).prop('checked')) {
							cover_lamination_type = +index;
						}
					});
					updateFinalPrice();
				});

				laminationUndercoverTypeWrapper.find('.t-radio__wrapper').change(function(){
					laminationUndercoverTypeRadio.each(function(index, element){
						if ($(element).prop('checked')) {
							undercover_lamination_type = +index;
						}
					});
					updateFinalPrice();
				});

				setInterval(updateFinalPrice, 100);
			}, 600);
		} catch (err) {}
	});
</script>